## Introduction
This folder contains the NER model, used in ePADD, dumped in human understandable format.  
ePADD NER is a rule based system on steroids, that is the rules are auto-generated by looking at large collection of entities (gazettes).
Also, the rules are probabilistic and not deterministic, in other words they can tell how confident they are about a match. 
The machine learning model learns a collection of rules for each semantic type which can readily be understood, appreciated and tweaked by a human.

## How to read

The final model consists of several rules that are indicative of one or more semantic types. 
Rules that are indicative of the same semantic type are placed in one file called *type*.txt where *type* is the semantic type that the rule is indicative of. The rules in a file are further arranged so that the rules go from high to low confidence from top to bottom.

Each rule is delimited from others with the following line:  
`========================`.  
Each rule description contains several lines representative of various attributes that the rule looks for in the context.
The semantic type of words to the left and right, if the span contains any stop words or dictionary words, are all the features that each of the rules look for in a given context.
A typical rule block is shown and further described below.

```
Token: Airways  
ID: airways  
L[PLACE]:0.2857:::L[PERSON]:0.1923:::L[AIRLINE]:0.1555:::L[COMPANY]:0.1352:::L[ORGANISATION]:0.1117:::L[EVENT]:0.0607:::  
R[EMPTY]:0.9313:::R[COMPANY]:0.0526:::R[PLACE]:0.0161:::R[ORGANISATION]:0:::R[EVENT]:0:::R[PERIODICAL\_LITERATURE]:0:::  
T[AIRLINE]:0.9834:::T[COMPANY]:0.0118:::T[OTHER]:0.0027:::T[PLACE]:0.0016:::T[EVENT]:0.0004:::T[PERIODICAL\_LITERATURE]:0:::  
SW[NULL]:1:::SW[and]:0:::  
DICT[N]:0.5889:::DICT[Y]:0.4111:::  
Active Evidence: 309.1601  
Evidence: 325.0  
========================
```
As the first line says, the rule corresponds to the token: *Airways*, in other words, the rule is active when this token is observed.  
ID in the second line is a canonicalized version of *Token*.  
The third line is the likelihood of semantic types that can appear to the left of the word (only the top 5 are shown and retained). 
`L[PLACE]:0.2857:::L[PERSON]:0.1923:::L[AIRLINE]:0.1555:::L[COMPANY]:0.1352:::L[ORGANISATION]:0.1117:::L[EVENT]:0.0607:::` reads as likelihood of *PLACE* to the left is 0.28, of *PERSON* to the left is 0.19 and so on.  
Similarly for the types to the right. 
To capture the likelihood for when there is no left or right word, that is, the token itself is the left most or right most word, an *EMPTY* type is used. 
Notice that the fourth line starts with *EMPTY* which means the token is more likely to appear as the right most word.  
The fifth line is similar to the above two lines, it reflects the affiliation of the token to a type.  
The next line captures the likelihood of a particular stop word in the chunk, where *NULL* means no stop word.  
`DICT[N]:0.5889:::DICT[Y]:0.4111:::` is likelihood of absence *[N]* or presence *[Y]* of a dictionary word in the phrase.  
The number in the `Evidence: ` line is number of times the rule is seen in the gazette lists and finally the number in the `Active Evidence: ` line is the number of times the rule actively contributed in explaining a gazette entries it is seen in.
Close evidence and active evidence numbers (like in the demo rule above) suggest that the rule is highly indicative of a certain type, in this case *AIRLINE*.

## How to edit

Since the rules are understandable, it is a pity if they cannot be edited.  
Editing the rules is as straightforward as editing text files. 
You can remove erroneous rules by finding them and removing the lines starting at `Token: ...` and ending with `========================`.  
Also, it is possible to tweak the existing rules. 
For example, consider:  

```
Token: Street  
ID: street  
L[EMPTY]:0.144:::L[PLACE]:0.0535:::L[PERSON]:0.0422:::L[BUILDING]:0.0183:::L[ROAD]:0.0118:::L[COMPANY]:0.0031:::  
R[EMPTY]:0.8913:::R[PLACE]:0.0146:::R[PERSON]:0.0013:::R[BUILDING]:0.0008:::R[ORGANISATION]:0.0004:::R[COMPANY]:0.0002:::  
T[PLACE]:0.3397:::T[ROAD]:0.0494:::T[BUILDING]:0.0305:::T[OTHER]:0.0212:::T[PERSON]:0.0025:::T[PERIODICAL_LITERATURE]:0.0011:::  
SW[NULL]:0.977:::SW[and]:0.0024:::SW[on]:0.0005:::SW[at]:0.0003:::SW[le]:0.0003:::SW[la]:0.0002:::  
DICT[N]:0.6327:::DICT[Y]:0.3622:::  
Active Evidence: 1011.4912  
Evidence: 2797.174  
========================
```

The rule block above, which is auto inferred, does not seem correct, especially the likelihood of left semantic type.
*Street* does not generally appear at the begining of chunks and appears often to the right of *PLACE*. 
The corresponding line can be changed to  
`L[EMPTY]:0:::L[PLACE]:0.0535:::L[PERSON]:0.0422:::L[BUILDING]:0.0183:::L[ROAD]:0.0118:::L[COMPANY]:0.0031:::`.
That is all!  
You can also add a new type that is not listed in the template. 
For example, in the *street* template above you can add `L[EVENT]:0.5` anywhere in the line while taking care of delimiter.  
Few things to note:

* You need not worry about the absolute numbers as long as you are keeping the ratio to what is desired. (the number are re-normalized when they are read back)  
* Make sure the types you use is one the types that is handled by the system. The types handled by the system are the names of the text files in this folder.

If you do not want to remove a certain rule, but nullify it then you can just set the `Active Evidence` to 0. 

Once the model is edited, ePADD will read back the changes the next time you use the system to recognize entities (you will have to restart the software if it is already running while you edit this.)
